@model ArtisanELearningSystem.Entities.Course

@{
    ViewData["Title"] = "CourseDetailView";
}

<div class="_215b01">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <div class="section3125">
                    <div class="row justify-content-center">
                        <div class="col-xl-4 col-lg-5 col-md-6">
                            <div class="preview_video">
                                <a href="#" class="fcrse_img" data-toggle="modal" data-target="#videoModal">
                                    <img src="/posters/@Model.Poster">
                                    <div class="course-overlay">
                                        <div class="badge_seller">Bestseller</div>
                                        <span class="play_btn1"><i class="uil uil-play"></i></span>
                                        <span class="_215b02">Preview this course</span>
                                    </div>
                                </a>
                            </div>
                            <div class="_215b10">
                                <a href="#" class="_215b11">
                                    <span><i class="uil uil-heart"></i></span>Save
                                </a>
                                <a href="#" class="_215b12">
                                    <span><i class="uil uil-windsock"></i></span>Report abuse
                                </a>
                            </div>
                        </div>
                        <div class="col-xl-8 col-lg-7 col-md-6">
                            <div class="_215b03">
                                <h2>@Model.Title</h2>
                                <span class="_215b04">@Model.Description</span>
                            </div>
                            <div class="_215b05">
                                <div class="crse_reviews mr-2">
                                    <i class="uil uil-star"></i>4.5
                                </div>
                                (@Model.TotalRatings ratings)
                            </div>
                            <div class="_215b05">
                                @ViewBag.EnrolledCourses enrolled
                            </div>
                            <div class="_215b06">
                                <div class="_215b07">
                                    <span><i class="uil uil-comment"></i></span>
                                    English
                                </div>

                            </div>

                            <ul class="_215b31">
                                <li><button class="btn_adcart">Add to Cart</button></li>


                                <li>
                                    <button class="btn_buy" onclick="window.location.href = '@Url.Action("ShoppingCart", "Course")?id=@Model.Id';">Buy</button>


                                </li>

                            </ul>
                            <div class="_215fgt1">
                                30-Day Money-Back Guarantee
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="_215b15 _byt1458">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <div class="user_dt5">
                    <div class="user_dt_left">
                        <div class="live_user_dt">
                            <div class="user_img5">
                                <a href="#"><img src="/curus/images/left-imgs/img-1.jpg"></a>
                            </div>
                            <div class="user_cntnt">
                                <a href="#" class="_df7852">@Model.Instructor.Name</a>
                                <button class="subscribe-btn">Subscribe</button>
                            </div>
                        </div>
                    </div>
                    <div class="user_dt_right">
                        <ul>
                            <li>
                                <a href="#" class="lkcm152"><i class="uil uil-eye"></i><span>@Model.ViewCount</span></a>
                            </li>
                            <li>
                                <a href="#" class="lkcm152"><i class="uil uil-thumbs-up"></i><span>100</span></a>
                            </li>
                            <li>
                                <a href="#" class="lkcm152"><i class="uil uil-thumbs-down"></i><span>20</span></a>
                            </li>
                            <li>
                                <a href="#" class="lkcm152"><i class="uil uil-share-alt"></i><span>9</span></a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="course_tabs">
                    <nav>
                        <div class="nav nav-tabs tab_crse justify-content-center" id="nav-tab" role="tablist">
                            <a class="nav-item nav-link active" id="nav-about-tab" data-toggle="tab" href="#nav-about" role="tab" aria-selected="true">About</a>
                            <a class="nav-item nav-link" id="nav-courses-tab" data-toggle="tab" href="#nav-courses" role="tab" aria-selected="false">Courses Content</a>
                            <a class="nav-item nav-link" id="nav-quiz-tab" data-toggle="tab" href="#nav-quiz" role="tab" aria-selected="false">Quiz</a>
                            <a class="nav-item nav-link" id="nav-reviews-tab" data-toggle="tab" href="#nav-reviews" role="tab" aria-selected="false">Reviews</a>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="_215b17">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <div class="course_tab_content">
                    <div class="tab-content" id="nav-tabContent">
                        <div class="tab-pane fade show active" id="nav-about" role="tabpanel">
                            <div class="_htg451">
                                <div class="_htg452">
                                    <h3>Requirements</h3>
                                    <ul>
                                        @foreach (var requirement in Model.Requirements.Split(','))
                                        {
                                            <li><span class="_5f7g11">@requirement</span></li>
                                        }
                                    </ul>
                                </div>
                                <div class="_htg452 mt-35">
                                    <h3>Description</h3>
                                    <span class="_abc123">Just a valid introduction</span>
                                    <p>Hi! Welcome to the ELearning Artisan System, the <strong>number one artisan elearning platform</strong>. There are a lot of options for online  training, but this course is without a doubt the most comprehensive and effective on the market. Here's why:</p>
                                    <ul class="_abc124">
                                        <li><span class="_5f7g11">@Model.Description</span></li>
                                    </ul>
                                </div>
                                <div class="_htg452 mt-35">
                                </div>
                                <div class="_htgdrt mt-35">
                                    <h3>What you'll learn</h3>
                                    <div class="_scd123">
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <ul class="_htg452 _abcd145">
                                                    @foreach (var outcome in Model.LearningOutcomes.Split(new[] { '\r', '\n' }, StringSplitOptions.RemoveEmptyEntries))
                                                    {
                                                        <li><div class="_5f7g15"><i class="fas fa-check-circle"></i><span>@outcome</span></div></li>
                                                    }
                                                </ul>

                                            </div>
                                            <div class="col-lg-6">
                                                <ul class="_htg452 _abcd145">
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="nav-courses" role="tabpanel">
                            <div class="crse_content">
                                <h3>Course content</h3>
                                <div class="_112456">
                                    <ul class="accordion-expand-holder">
                                        <li><span class="accordion-expand-all _d1452">Expand all</span></li>
                                        <li><span class="_fgr123"> 402 lectures</span></li>
                                        <li><span class="_fgr123">47:06:29</span></li>
                                    </ul>
                                </div>
                                <div id="accordion" class="ui-accordion ui-widget ui-helper-reset">
                                    @for (int i = 0; i < ViewBag.Lectures.Count; i++)
                                    {
                                        var item = ViewBag.Lectures[i];
                                        <a href="javascript:void(0)" class="accordion-header ui-accordion-header ui-helper-reset ui-state-default ui-accordion-icons ui-corner-all">
                                            <div class="section-header-left">
                                                <span class="section-title-wrapper">
                                                    <i class="uil uil-presentation-play crse_icon"></i>
                                                    <span class="section-title-text">@item.Title</span>
                                                </span>
                                            </div>
                                            <div class="section-header-right">
                                                <span class="num-items-in-section">6 items</span>
                                                <span class="section-header-length">@item.Runtime</span>
                                            </div>
                                        </a>
                                        <div class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom">
                                            <div class="lecture-container">
                                                <div class="left-content">
                                                    <i class="uil uil-file icon_142"></i>
                                                    <div class="top">
                                                        <div class="title">@item.Description</div>
                                                    </div>
                                                </div>
                                                <div class="details">
                                                    <span class="content-summary">@item.Runtime</span>
                                                </div>
                                            </div>
                                            <div class="lecture-container">
                                                <div class="left-content">
                                                    <i class="uil uil-file icon_142"></i>
                                                    <div class="top">
                                                        <div class="title">IsPreviewFee</div>
                                                    </div>
                                                </div>
                                                <div class="details">
                                                    <span class="content-summary">@item.IsPreviewFree</span>
                                                </div>
                                            </div>
                                            <div class="lecture-container">
                                                <div class="left-content">
                                                    <video controls style="max-width: 100%; height: 500px;">
                                                        <source src="/videos/@item.URL" type="video/mp4">
                                                        Your browser does not support the video tag.
                                                    </video>
                                                    <div class="top">
                                                        <div class="title">@item.Title</div>
                                                    </div>
                                                </div>
                                                <div class="details">
                                                  
                                                    <span class="content-summary">@item.Runtime</span>
                                                </div>
                                            </div>
                                            <div class="lecture-container">
                                                <div class="left-content">
                                                    <i class="uil uil-file-download-alt icon_142"></i>
                                                    <div class="top">
                                                        <div class="title">Video Format</div>
                                                    </div>
                                                </div>
                                                <div class="details">
                                                  
                                                    <span class="content-summary">@item.VideoType</span>
                                                </div>
                                            </div>                                         
                                            <div class="lecture-container">
                                                <div class="left-content">
                                                    <i class="uil uil-file icon_142"></i>
                                                    <div class="top">
                                                        <div class="title">Author</div>
                                                    </div>
                                                </div>
                                                <div class="details">
                                                    <span class="content-summary">@item.Instructor.Name</span>
                                                </div>
                                            </div>
                                        </div>
                                        @if (i == 19)
                                        {
                                            <!-- Show 20 sections at a time -->
                                            <a class="btn1458 load-more" href="#">20 More Sections</a>
                                        }
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="nav-quiz" role="tabpanel">
                            <div class="crse_content">
                                <h3>Quiz</h3>
                                <br />
                               
                                     @foreach(var quiz in ViewBag.Quizes){
                                        <h2>@quiz.Title</h2>
                                     }
                                    <form asp-action="EvaluateAnswers" method="post">
                                        @foreach(var quiz in ViewBag.Quizes){
                                        <input type="hidden" name="quizId" value="@quiz.Id" />

                                        @for (int i = 0; i < quiz.Questions.Count; i++)
                                        {
                                            var question = quiz.Questions[i];
                                            <fieldset>
                                                <legend>
                                                    <span class="question-number">@Html.Raw(i + 1)</span>
                                                    @question.Title
                                                </legend>
                                               
                                                @foreach (var answer in question.Options)
                                                {
                                                        <label>
                                                            <div class="agree_checkbox">
                                                        <input type="checkbox" name="answerIds" value="@answer.Id" />
                                                        @answer.Title
                                                        </div>
                                                    </label>
                                                    <br />
                                                }
                                            </fieldset>
                                        }
                                        }
                                        <button class="code-apply-btn" type="submit">Submit</button>
                                    </form>

                                    <div id="feedback"></div>
                                    
                              
                                
                            </div>
                        </div>
                        <div class="tab-pane fade" id="nav-reviews" role="tabpanel">

                            <div class="col-lg-12">
                                <form method="post" action="/Course/SubmitRating">


                                    <div class="title-icon">
                                        <h3 class="title"><i class="uil uil-info-circle"></i>Rating</h3>
                                    </div>
                                    <div class="course__form">
                                        <div class="general_info10">
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12">
                                                    <div class="ui search focus mt-30 lbel25">
                                                        <label>Rating (0-5)*</label>
                                                        <div class="ui left icon input swdh19">

                                                            <input type="hidden" name="CourseId" value="@Model.Id" />


                                                            <input type="Number" name="Rating" min="1" max="5" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-12 col-md-12">
                                                    <div class="ui search focus lbel25 mt-30">
                                                        <label>Requirements*</label>
                                                        <div class="ui form swdh30">
                                                            <div class="field">
                                                                <textarea name="Comment" rows="4" cols="50"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="tab-from-content">
                                                    <div class="title-icon">
                                                        <button class="btn btn-default steps_btn" type="submit"><i class="uil uil-download-alt">Submit</i></button>

                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>


                                </form>
                            </div>
                            <div class="student_reviews">
                                <div class="row">

                                    <div class="col-lg-5">
                                        <div class="reviews_left">
                                            <h3>Student Feedback</h3>
                                            <div class="total_rating">
                                                <div class="_rate001">@Model.AverageRating</div>
                                                <div class="rating-box">
                                                    <span class="rating-star full-star"></span>
                                                    <span class="rating-star full-star"></span>
                                                    <span class="rating-star full-star"></span>
                                                    <span class="rating-star full-star"></span>
                                                    <span class="rating-star half-star"></span>
                                                </div>
                                                <div class="_rate002">Course Rating</div>
                                            </div>
                                            <div class="_rate003">
                                                <div class="_rate004">
                                                </div>
                                                <div class="_rate004">
                                                    <div class="progress progress1">
                                                        <div class="progress-bar w-30" role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <div class="rating-box">
                                                        <span class="rating-star full-star"></span>
                                                        <span class="rating-star full-star"></span>
                                                        <span class="rating-star full-star"></span>
                                                        <span class="rating-star full-star"></span>
                                                        <span class="rating-star empty-star"></span>
                                                    </div>
                                                    <div class="_rate002">40%</div>
                                                </div>
                                                <div class="_rate004">
                                                    <div class="progress progress1">
                                                        <div class="progress-bar w-5" role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <div class="rating-box">
                                                        <span class="rating-star full-star"></span>
                                                        <span class="rating-star full-star"></span>
                                                        <span class="rating-star full-star"></span>
                                                        <span class="rating-star empty-star"></span>
                                                        <span class="rating-star empty-star"></span>
                                                    </div>
                                                    <div class="_rate002">5%</div>
                                                </div>
                                                <div class="_rate004">
                                                    <div class="progress progress1">
                                                        <div class="progress-bar w-2" role="progressbar" aria-valuenow="2" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <div class="rating-box">
                                                        <span class="rating-star full-star"></span>
                                                        <span class="rating-star full-star"></span>
                                                        <span class="rating-star empty-star"></span>
                                                        <span class="rating-star empty-star"></span>
                                                        <span class="rating-star empty-star"></span>
                                                    </div>
                                                    <div class="_rate002">1%</div>
                                                </div>
                                                <div class="_rate004">
                                                    <div class="progress progress1">
                                                        <div class="progress-bar w-1" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                    <div class="rating-box">
                                                        <span class="rating-star full-star"></span>
                                                        <span class="rating-star empty-star"></span>
                                                        <span class="rating-star empty-star"></span>
                                                        <span class="rating-star empty-star"></span>
                                                        <span class="rating-star empty-star"></span>
                                                    </div>
                                                    <div class="_rate002">1%</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="review_right">
                                            <div class="review_right_heading">
                                                <h3>Reviews</h3>
                                                <div class="review_search">
                                                    <input class="rv_srch" type="text" placeholder="Search reviews...">
                                                    <button class="rvsrch_btn"><i class="uil uil-search"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="review_all120">
                                            @foreach (var item in ViewBag.Ratings)
                            {
                                            <div class="review_item">
                                                <div class="review_usr_dt">
                                                    <img src="/curus/images/left-imgs/img-1.jpg">
                                                    <div class="rv1458">
                                                        <h4 class="tutor_name1">@item.Student.Name</h4>
                                                        <span class="time_145">@item.TimeAgo</span>
                                                    </div>
                                                </div>
                                                <div class="rating-box mt-20">
                                                   
                                                    
                                                        @if(item?.Rating <= 3)
                                                        {
<span class="rating-star half-star"></span>
                                                        }             else
                                                            {
                                                                <span class="rating-star full-star"></span>
                                                            }

                                                </div>
                                                <p class="rvds10">@item?.Comment</p>
                                                <div class="rpt100">
                                                    <span>Was this review helpful?</span>
                                                    <div class="radio--group-inline-container">
                                                        <div class="radio-item">
                                                            <input id="radio-1" name="radio" type="radio">
                                                            <label for="radio-1" class="radio-label">Yes</label>
                                                        </div>
                                                        <div class="radio-item">
                                                            <input id="radio-2" name="radio" type="radio">
                                                            <label for="radio-2" class="radio-label">No</label>
                                                        </div>
                                                    </div>
                                                    <a href="#" class="report145">Report</a>
                                                </div>
                                            </div>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        $(document).ready(function () {
            // Hide all sections initially
            $(".ui-accordion-content").hide();

            // Show the first 20 sections
            $(".ui-accordion-content:lt(20)").show();

            // Handle "Load More" click
            $(".load-more").click(function (e) {
                e.preventDefault();

                // Hide the "Load More" button
                $(this).hide();

                // Show the next 20 sections
                var visibleSections = $(".ui-accordion-content:visible").length;
                $(".ui-accordion-content:hidden:lt(20)").show();

                // If there are no more hidden sections, hide the button
                if ($(".ui-accordion-content:hidden").length === 0) {
                    $(".load-more").hide();
                }
            });
        });
    </script>

   
    }
