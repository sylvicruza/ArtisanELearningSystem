@model CombinedViewModel

<div class="modal fade" id="add_section_model" tabindex="-1" aria-labelledby="lectureModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <form asp-controller="Instructor" asp-action="AddSection" method="post">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="lectureModalLabel">New Section</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="new-section-block">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="new-section">
                                    <div class="form_group">
                                        <label class="label25">Section Name*</label>
                                        <input class="form_input_1" type="text" name="sectionName" placeholder="Section title here">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="main-btn cancel" data-dismiss="modal">Close</button>
                    <button type="submit" class="main-btn">Add Section</button>
                </div>
            </div>
        </form>
    </div>
</div>


<div class="modal fade" id="add_lecture_model" tabindex="-1" aria-labelledby="lectureModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <form asp-controller="Course" asp-action="CreateLecture" method="post" enctype="multipart/form-data">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="lectureModalLabel">Add Lecture</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="new-section-block">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="course-main-tabs">
                                    <div class="nav nav-pills flex-column flex-sm-row nav-tabs" role="tablist">
                                        <a class="flex-sm-fill text-sm-center nav-link active" data-toggle="tab" href="#nav-basic" role="tab" aria-selected="true"><i class="fas fa-file-alt mr-2"></i>Basic</a>
                                        <a class="flex-sm-fill text-sm-center nav-link" data-toggle="tab" href="#nav-video" role="tab" aria-selected="false"><i class="fas fa-video mr-2"></i>Video</a>
                                        @*<a class="flex-sm-fill text-sm-center nav-link" data-toggle="tab" href="#nav-attachment" role="tab" aria-selected="false"><i class="fas fa-paperclip mr-2"></i>Attachments</a>*@
                                    </div>
                                    <div class="tab-content">

                                        <div class="tab-pane fade show active" id="nav-basic" role="tabpanel">
                                            <div class="new-section mt-30">
                                                <div class="form_group">
                                                    <label class="label25">Lecture Title*</label>
                                                    <input asp-for="Lecture.Title" class="form_input_1" type="text" placeholder="Title here">
                                                    <span asp-validation-for="Lecture.Title" class="text-danger"></span>
                                                </div>
                                            </div>
                                            <div class="ui search focus lbel25 mt-30">
                                                <label>Description*</label>
                                                <div class="ui form swdh30">
                                                    <div class="field">
                                                        <textarea asp-for="Lecture.Description" rows="3" placeholder="Description here..."></textarea>
                                                        <span asp-validation-for="Lecture.Description" class="text-danger"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="preview-dt">
                                                <span class="title-875">Free Preview</span>
                                                <label class="switch">
                                                    <input asp-for="Lecture.IsPreviewFree" type="checkbox">
                                                    <span></span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="nav-video" role="tabpanel">
                                            <div class="lecture-video-dt mt-30">
                                                <span class="video-info">Select your preferred video type. (.mp4, YouTube, Vimeo etc.)</span>
                                                <div class="video-category">
                                                    <label><input type="radio" asp-for="Lecture.VideoType" value="mp4" checked><span>HTML5(mp4)</span></label>
                                                    <label><input type="radio" asp-for="Lecture.VideoType" value="url"><span>External URL</span></label>
                                                    <label><input type="radio" asp-for="Lecture.VideoType" value="youtube"><span>YouTube</span></label>
                                                    <label><input type="radio" asp-for="Lecture.VideoType" value="vimeo"><span>Vimeo</span></label>
                                                    <label><input type="radio" asp-for="Lecture.VideoType" value="embedded"><span>embedded</span></label>
                                                    <div class="mp4 video-box" style="display: block;">
                                                        <div class="row">
                                                            <div class="col-lg-6 col-md-6">
                                                                <div class="upload-file-dt mt-30">
                                                                    <div>
                                                                        <input asp-for="Lecture.VideoFile" class="form-control-file"  type="file" id="VideoFile__input--source">
                                                                        @*<label for="VideoFile__input--source" title="Zip">Upload Video</label>*@
                                                                    </div>
                                                                    <span class="uploadBtn-main-file">File Format: .mp4</span>
                                                                  @*  <span class="uploaded-id">Uploaded ID : <b>12</b></span>*@
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6 col-md-6">
                                                                <div class="upload-file-dt mt-30">
                                                                    <div>
                                                                        <input asp-for="Lecture.PosterFile" class="form-control-file" type="file" id="PosterFile__input--source">
                                                                       @* <label for="PosterFile__input--source" title="Zip">Video Poster</label>*@
                                                                    </div>
                                                                    <span class="uploadBtn-main-file color-b">Uploaded ID : preview.jpg</span>
                                                                   @* <span class="uploaded-id color-fmt">Size: 590x300 pixels. Supports: jpg,jpeg, or png</span>*@
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="video-duration">
                                                            <label class="label25">Video Runtime - <strong>hh:mm:ss</strong>*</label>
                                                            <div class="duration-time">
                                                                <div class="input-group">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.hours" placeholder="00">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.mins" placeholder="1">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.secs" placeholder="00">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="url video-box">
                                                        <div class="new-section">
                                                            <div class="ui search focus mt-30 lbel25">
                                                                <label>External URL*</label>
                                                                <div class="ui left icon input swdh19">
                                                                    <input asp-for="Lecture.URL" class="prompt srch_explore" type="text" placeholder="External Video URL">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="video-duration">
                                                            <label class="label25">Video Runtime - <strong>hh:mm:ss</strong>*</label>
                                                            <div class="duration-time">
                                                                <div class="input-group">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.hours" placeholder="00">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.mins" placeholder="1">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.secs" placeholder="00">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="youtube video-box">
                                                        <div class="new-section">
                                                            <div class="ui search focus mt-30 lbel25">
                                                                <label>Youtube URL*</label>
                                                                <div class="ui left icon input swdh19">
                                                                    <input asp-for="Lecture.URL" class="prompt srch_explore" type="text" placeholder="Youtube Video URL">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="video-duration">
                                                            <label class="label25">Video Runtime - <strong>hh:mm:ss</strong>*</label>
                                                            <div class="duration-time">
                                                                <div class="input-group">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.hours" placeholder="00">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.mins" placeholder="1">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.secs" placeholder="00">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="vimeo video-box">
                                                        <div class="new-section">
                                                            <div class="ui search focus mt-30 lbel25">
                                                                <label>Vimeo URL*</label>
                                                                <div class="ui left icon input swdh19">
                                                                    <input asp-for="Lecture.URL" class="prompt srch_explore" type="text" placeholder="Vimeo Video URL">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="video-duration">
                                                            <label class="label25">Video Runtime - <strong>hh:mm:ss</strong>*</label>
                                                            <div class="duration-time">
                                                                <div class="input-group">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.hours" placeholder="00">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.mins" placeholder="1">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.secs" placeholder="00">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="embedded video-box">
                                                        <div class="new-section">
                                                            <div class="ui search focus mt-30 lbel25">
                                                                <label>Embedded Code*</label>
                                                                <div class="ui form swdh30">
                                                                    <div class="field">
<textarea rows="3" placeholder="Place your embedded code here"></textarea>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="video-duration">
                                                            <label class="label25">Video Runtime - <strong>hh:mm:ss</strong>*</label>
                                                            <div class="duration-time">
                                                                <div class="input-group">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.hours" placeholder="00">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.mins" placeholder="1">
                                                                    <input type="text" class="form_input_1" asp-for="Lecture.secs" placeholder="00">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        @* Add a hidden field to store and pass the id *@
                                    
                                        <input type="hidden" asp-for="Lecture.CourseId" />

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="main-btn cancel" data-dismiss="modal">Close</button>
                    <button type="submit" class="main-btn">Add Lecture</button>
                </div>
            </div>
        </form>
    </div>
</div>


<div class="modal fade" id="add_quiz_model" tabindex="-1" aria-labelledby="lectureModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <form asp-controller="Course" asp-action="AddQuiz" id="quizForm">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="lectureModalLabel">Add Quiz</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="new-section-block">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="course-main-tabs">
                                <div class="nav nav-pills flex-column flex-sm-row nav-tabs" role="tablist">
                                    <a class="flex-sm-fill text-sm-center nav-link active" data-toggle="tab" href="#nav-quizbasic" role="tab" aria-selected="true"><i class="fas fa-file-alt mr-2"></i>Basic</a>
                                    <a class="flex-sm-fill text-sm-center nav-link" data-toggle="tab" href="#nav-questions" role="tab" aria-selected="false"><i class="fas fa-question-circle mr-2"></i>Questions</a>
                              
                                </div>
                                <div class="tab-content">

                                    <div class="tab-pane fade show active" id="nav-quizbasic" role="tabpanel">
                                        <div class="new-section">
                                            <div class="form_group mt-30">
                                                <label class="label25">Quiz Title*</label>
                                                <input id="Title" asp-for="Quiz.Title" class="form_input_1" type="text" placeholder="Title here">
                                            </div>
                                        </div>
                                        <div class="ui search focus lbel25 mt-30">
                                            <label>Description*</label>
                                            <div class="ui form swdh30">
                                                <div class="field">
<textarea rows="3" id="Description" asp-for="Quiz.Description" placeholder="description here..."></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="nav-questions" role="tabpanel">
                                        <div class="lecture-video-dt mt-30">
                                            <div class="add-ques-dt">
                                                <button type="button" class="main-btn color btn-hover w-100" data-toggle="collapse" data-target="#add-ques"><i class="far fa-plus-square mr-2"></i>Add Question</button>
                                                <div id="add-ques" class="collapse">
                                                    <div class="lecture-video-dt mt-30">
                                                        <span class="video-info">Question Type</span>
                                                        <div class="video-category">
                                                           @* <label><input type="radio" name="colorRadio" value="schoice"><span><i class="far fa-dot-circle mr-2"></i>Single Choice</span></label>*@
                                                            <label><input type="radio" asp-for="Quiz.Type" value="mchoice"><span><i class="far fa-check-circle mr-2"></i>Multiple Choice</span></label>
                                                      @*      <label><input type="radio" name="colorRadio" value="sline"><span><i class="far fa-edit mr-2"></i>Single Line Text</span></label>
                                                            <label><input type="radio" name="colorRadio" value="mline"><span><i class="far fa-file-alt mr-2"></i>Milti Line Text</span></label>*@
                                                           @* <div class="schoice quiz-box">
                                                                <div class="ques-box">
                                                                    <div class="row">
                                                                        <div class="col-lg-2 col-md-2">
                                                                            <div class="form_group mt-30">
                                                                                <label class="label25 text-left">Image*</label>
                                                                                <div class="upload-thumb">
                                                                                        <input class="form_input_1" asp-for="Quiz.Image" type="file"  id="thumbnail_source">
                                                                                    <label class="mx-0 my-0" for="thumbnail_source" title="Image"><img class="img-thumbnail" src="/curus/images/placeholder-image.png"></label>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-7 col-md-9">
                                                                            <div class="form_group mt-30">
                                                                                <label class="label25 text-left">Question Title*</label>
                                                                                    <input class="form_input_1" asp-for="Quiz.QuestionTitle" type="text" placeholder="Write question title">
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-3 col-md-12">
                                                                            <div class="form_group mt-30">
                                                                                <label class="label25 text-left">Score*</label>
                                                                                    <input class="form_input_1" asp-for="Quiz.Score" type="number" placeholder="Score">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="ans-box">
                                                                    <div class="row">
                                                                        <div class="col-lg-12 col-md-12">
                                                                            <button class="main-btn color btn-hover mt-30">Add Option</button>
                                                                        </div>
                                                                        <div class="col-lg-12 col-md-12">
                                                                            <div class="option-item">
                                                                                <div class="opt-title">
                                                                                    <h4>1. Option</h4>
                                                                                    <span class="opt-del"><i class="fas fa-trash-alt"></i></span>
                                                                                </div>
                                                                                <div class="option-wrap">
                                                                                    <div class="form_group">
                                                                                        <label class="label25 text-left">Option Title*</label>
                                                                                            <input class="form_input_1" asp-for="Quiz.OptionTitle" type="text" placeholder="Option title">
                                                                                    </div>
                                                                                    <div class="agree_checkbox">
                                                                                            <input type="checkbox" asp-for="Quiz.IsCorrectAnswer" id="check1">
                                                                                        <label for="check1">Correct answer</label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>*@
                                                            <div class="mchoice quiz-box">
                                                                <div class="ques-box">
                                                                    <div class="row">
                                                                        <div class="col-lg-2 col-md-2">
                                                                            <div class="form_group mt-30">
                                                                                <label class="label25 text-left">Image*</label>
                                                                                <div class="upload-thumb">
                                                                                        <input class="form_input_1" asp-for="Quiz.Image" type="file"  id="thumbnail_source1">
                                                                                    <label class="mx-0 my-0" for="thumbnail_source1" title="Image"><img class="img-thumbnail" src="/curus/images/placeholder-image.png"></label>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-7 col-md-9">
                                                                            <div class="form_group mt-30">
                                                                                <label class="label25 text-left">Question Title*</label>
                                                                                    <input class="form_input_1" asp-for="Quiz.QuestionTitle" type="text" placeholder="Write question title">
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-3 col-md-12">
                                                                            <div class="form_group mt-30">
                                                                                <label class="label25 text-left">Score*</label>
                                                                                    <input class="form_input_1" asp-for="Quiz.Score" type="number" placeholder="Score">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="ans-box">
                                                                    <div class="row">
                                                                        <div class="col-lg-12 col-md-12">
                                                                            <button class="main-btn color btn-hover mt-30">Add Option</button>
                                                                        </div>
                                                                        <div class="col-lg-12 col-md-12">
                                                                            <div class="option-item">
                                                                                <div class="opt-title">
                                                                                    <h4>1. Option</h4>
                                                                                    <span class="opt-del"><i class="fas fa-trash-alt"></i></span>
                                                                                </div>
                                                                                <div class="option-wrap">
                                                                                    <div class="form_group">
                                                                                        <label class="label25 text-left">Option Title*</label>
                                                                                            <input class="form_input_1" asp-for="Quiz.OptionTitle" type="text" placeholder="Option title">
                                                                                    </div>
                                                                                    <div class="agree_checkbox">
                                                                                            <input type="checkbox" asp-for="Quiz.IsCorrectAnswer" id="check2">
                                                                                        <label for="check2">Correct answer</label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                         
                                                           
                                                        </div>
                                                    </div>
                                                    <div class="share-submit-btns pl-0 pb-0">
                                                        <button class="main-btn color btn-hover"><i class="fas fa-save mr-2"></i>Save Question</button>
                                                    </div>
                                                </div>
                                                    <input type="hidden" asp-for="Quiz.CourseId" />
                                             @*   <div class="added-ques">
                                                    <div class="section-group-list pl-0 pr-0 sortable">
                                                        <div class="section-list-item">
                                                            <div class="section-item-title">
                                                                <i class="far fa-dot-circle mr-2"></i>
                                                                <span class="section-item-title-text">Question Title</span>
                                                            </div>
                                                            <button type="button" class="section-item-tools"><i class="fas fa-edit"></i></button>
                                                            <button type="button" class="section-item-tools"><i class="fas fa-trash-alt"></i></button>
                                                            <button type="button" class="section-item-tools ml-auto"><i class="fas fa-bars"></i></button>
                                                        </div>
                                                        <div class="section-list-item">
                                                            <div class="section-item-title">
                                                                <i class="far fa-check-circle mr-2"></i>
                                                                <span class="section-item-title-text">Question Title</span>
                                                            </div>
                                                            <button type="button" class="section-item-tools"><i class="fas fa-edit"></i></button>
                                                            <button type="button" class="section-item-tools"><i class="fas fa-trash-alt"></i></button>
                                                            <button type="button" class="section-item-tools ml-auto"><i class="fas fa-bars"></i></button>
                                                        </div>
                                                        <div class="section-list-item">
                                                            <div class="section-item-title">
                                                                <i class="far fa-edit mr-2"></i>
                                                                <span class="section-item-title-text">Question Title</span>
                                                            </div>
                                                            <button type="button" class="section-item-tools"><i class="fas fa-edit"></i></button>
                                                            <button type="button" class="section-item-tools"><i class="fas fa-trash-alt"></i></button>
                                                            <button type="button" class="section-item-tools ml-auto"><i class="fas fa-bars"></i></button>
                                                        </div>
                                                        <div class="section-list-item">
                                                            <div class="section-item-title">
                                                                <i class="far fa-file-alt mr-2"></i>
                                                                <span class="section-item-title-text">Question Title</span>
                                                            </div>
                                                            <button type="button" class="section-item-tools"><i class="fas fa-edit"></i></button>
                                                            <button type="button" class="section-item-tools"><i class="fas fa-trash-alt"></i></button>
                                                            <button type="button" class="section-item-tools ml-auto"><i class="fas fa-bars"></i></button>
                                                        </div>
                                                    </div>
                                                </div>*@
                                            </div>
                                        </div>
                                    </div>
                                  
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="main-btn cancel" data-dismiss="modal">Close</button>
                <button type="submit" class="main-btn">Add Quiz</button>
            </div>
        </div>
        </form>
    </div>
</div>


@section scripts {
    <!-- Add jQuery library (if not already included) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Add this script to handle user interactions -->
    <script>
        $(document).ready(function () {
            // Handle the "Add Quiz" button click
            $("#add-quiz-btn").click(function () {
                // Reset form fields
                $("#Title").val("");
                $("#Description").val("");
                // ... Reset other fields ...

                // Show the modal
                $("#add_quiz_model").modal("show");
            });

            // Handle adding options for multiple choice question
            $(".mchoice .add-option").click(function () {
                // Add a new option input field
                const newOption = $("<div class='option-item'>...</div>");
                $(".mchoice .option-wrap").append(newOption);
            });

            // Handle form submission
            $("#quizForm").submit(function (event) {
                event.preventDefault();

                // Collect form data here (e.g., Title, Description, Questions, Options, etc.)
                const formData = {
                    Title: $("#Title").val(),
                    Description: $("#Description").val(),
                    // ... Collect other form fields ...

                    // Example: Questions and Options for a multiple choice question
                    Questions: [
                        {
                            Title: "Question Title 1",
                            Type: "mchoice",
                            Options: [
                                { Title: "Option 1", IsCorrect: true },
                                { Title: "Option 2", IsCorrect: false }
                                    // ... Add more options ...
                                }
                            },
                            // ... Add more questions ...
                        ]
            };

            // Perform an AJAX call to submit the form data to the server
            $.ajax({
                type: "POST",
                url: "/api/Quiz/Add", // Change this URL to your API endpoint
                data: formData,
                success: function (response) {
                    // Handle success response
                    // You can show a success message, clear the form, etc.
                },
                error: function (error) {
                    // Handle error response
                    // You can show an error message or take appropriate action
                }
            });
        });
            });
    </script>
}